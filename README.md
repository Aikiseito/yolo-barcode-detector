# barcode detector

ะะตัะตะบัะธัะพะฒะฐะฝะธะต ะทะพะฝ โ ะณััะฑัะต ะบะพัะพะฑะบะธ (bbox detection). ะัะตะผ ะพะดะฝะพะผะตัะฝัะต ะธ ะดะฒัะผะตัะฝัะต ะบะพะดั ะฝะฐ ัะพัะพะณัะฐัะธัั: qr, ean13, ean8, upc, 1d (ะฝะตัะฐัะฟะพะทะฝะฐะฝะฝัะต ะพะดะฝะพะผะตัะบะธ), dm, az, pdf, id (ะฝะตะฒะพะทะผะพะถะฝะพ ะดะตัะตะบัะธัะพะฒะฐัั), hd (ัััะดะฝะพ ะดะตัะตะบัะธัะพะฒะฐัั).

# ะะพััะฐะฝะพะฒะบะฐ ะทะฐะดะฐัะธ

ะ ะดะฐะฝะฝะพะผ ะฟัะพะตะบัะต ั ัะตัะฐั ะทะฐะดะฐัั ะดะตัะตะบัะธะธ ะพะดะฝะพะผะตัะฝัั (ะฝะฐะฟัะธะผะตั, ัััะธั-ะบะพะดะพะฒ ัะธะฟะฐ ean13) ะธ ะดะฒัะผะตัะฝัั (ะฝะฐะฟัะธะผะตั, qr-ะบะพะดั) ะบะพะดะพะฒ ะฝะฐ ัะพัะพะณัะฐัะธัั. ะะพั ัะธััะตะผะฐ ะฐะฝะฐะปะธะทะธััะตั ะธะทะพะฑัะฐะถะตะฝะธั ะธ ะฒัะดะฐัั ะบะพะพัะดะธะฝะฐัั ัะตัััะตั ัะณะปะพะฒ ะดะปั ะบะฐะถะดะพะน ัะธะณััั, ะฒ ะบะพัะพััั ะฟะพะผะตัะฐะตััั ะพะฑะฝะฐััะถะตะฝะฝัะน ะบะพะด, ะธะปะธ ัะพะพะฑัะฐะตั ะพะฑ ะตะณะพ ะพััััััะฒะธะธ. 

__Input:__ ะบะฐััะธะฝะบะฐ ะฒ ัะพัะผะฐัะต .jpg ะธะปะธ .png โ ัะพัะพะณัะฐัะธั ั ะผะพะฑะธะปัะฝะพะณะพ ััััะพะนััะฒะฐ.

__Output:__ ะผะฐััะธะฒ ะฒะธะดะฐ [(๐ฅ1, ๐ฅ2, ๐ฅ3, ๐ฅ4), ...] โ ะบะพะพัะดะธะฝะฐัั left top โ right bottom ัะณะปะพะฒ bboxโะฐ, ะฒ ะบะพัะพัะพะผ ะฝะฐัะพะดะธััั ะบะพะด. ะะพะทะฒัะฐัะฐะตั ะฟัััะพะน ัะฟะธัะพะบ, ะตัะปะธ ัััะธัะบะพะด ะฝะต ะฝะฐะนะดะตะฝ. ะััั ะฒะพะทะผะพะถะฝะพััั ะฟะพะปััะธัั ะฝะฐ ะฒััะพะด ะบะฐััะธะฝะบั ั bboxโะพะผ.

## ะะตััะธะบะธ

ะะปััะตะฒัะต ะผะตััะธะบะธ - IoU ะธ ัะฐัััะพัะฝะธะต ะฅะฐััะดะพััะฐ.

## ะะฐะปะธะดะฐัะธั

ะะปั ัะฐะทะดะตะปะตะฝะธั ะฒัะฑะพัะพะบ ะธัะฟะพะปัะทัั ะผะตัะพะด K-fold ะบัะพัั-ะฒะฐะปะธะดะฐัะธั ั 5 ัะพะปะด.

## ะะฐะฝะฝัะต 

ะะพะน ะดะฐัะฐัะตั: 117 ัะพัะพะณัะฐัะธะน 1D ะธ 2D ะบะพะดะพะฒ ะฒ ัะพัะผะฐัะต .jpg ะธ ัะพะพัะฒะตัััะฒัััะธะต ะธะผ ัะฐะนะปั .json (ะธะผั-ัะพัะพ.jpg.json) ั ัะฐะทะผะตัะบะพะน. ะะท ะฝะธั:
```
qr  | ean13 | 1d | dm | pdf | upc |  hd | id |

103 |   83  | 69 | 69 |  4  |  3  | 159 | 68 |
```
# ะะพะดะตะปะธัะพะฒะฐะฝะธะต

__ะะตะนะทะปะฐะนะฝ__

ะกัะฐะฒะฝะตะฝะธะต ัะพ ััะฐะฝะดะฐััะฝะพะน ะผะพะดะตะปัั YOLO (ะฑะตะท ะดะพะพะฑััะตะฝะธั)

__ะัะฝะพะฒะฝะฐั ะผะพะดะตะปั__

yolov5s.pt

__ะะฝะตะดัะตะฝะธะต__

ะัะพะณัะฐะผะผะฝัะน ะฟะฐะบะตั ัะพััะพะธั ะธะท ะฝะตัะบะพะปัะบะธั ะผะพะดัะปะตะน, ะพัะฒะตัะฐััะธั ะทะฐ ะพะฑััะตะฝะธะต ะธ ะฒะฐะปะธะดะฐัะธั, ะฐ ัะฐะบะถะต ะทะฐ ะธะฝัะตัะตะฝั ะผะพะดะตะปะธ

# ะฃััะฐะฝะพะฒะบะฐ

1. ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน
    ```
    git clone https://github.com/Aikiseito/yolo-barcode-detector.git
    cd yolo-barcode-detector
    ```
2. ะฃััะฐะฝะพะฒะธัะต poetry
   ```
   poetry install
   ```
3. ะฃััะฐะฝะพะฒะธัะต pre-commit ััะบะธ
   ```
   pre-commit install
   pre-commit run -a
   ```
4. ะะฝะธัะธะฐะปะธะทะธััะนัะต DVC (ะดะปั ัะดะฐะปัะฝะฝะพะณะพ ะดะพัััะฟะฐ)
   ```
   dvc remote add -d storage <your-remote-url>
   ```
5. ะกะบะฐัะฐะนัะต ะดะฐะฝะฝัะต ัะตัะตะท DVC
   ```
   python commands.py download_data
   ```
6. ะะฑัะฐะฑะพัะฐะนัะต ะดะฐะฝะฝัะต
    ```
    python -m barcode_detector.data.preprocess
    ```
# Training
1. ะะพะพะฑััะธัะต YOLO
   ```
   python commands.py train
   ```
2. ะะฐะฟัััะธัะต inference
   ```
   python commands.py infer
   ```
3. Evaluation
ะะพะดะดะตัะถะธะฒะฐัััั ัะปะตะดัััะธะต ะผะตััะธะบะธ:
1. IoU (Intersection over Union)
2. Hausdorff distance
3. mAP (mean Average Precision)

ะัะตะฝะบะฐ ะฒัะฟะพะปะฝัะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะพัะปะต inference, ััะฐะฒะฝะธะฒะฐั ะฟัะตะดัะบะฐะทะฐะฝะฝัะต bounding boxes ั ground truth.

# ะญะบัะฟะพัั ะผะพะดะตะปะธ
1. ะ ONNX:
   ```
   python commands.py export_onnx --model_path=path/to/best.pt --output_path=path/to/model.onnx
   ```
2. ะ TensorRT
   ```
   python commands.py export_tensorrt --onnx_path=path/to/model.onnx --output_path=path/to/model.trt
   ```

__Happy barcoding!!!__


# ะกัััะบัััะฐ ัะตะฟะพะทะธัะพัะธั

```
yolo-barcode-detector/
โโโ detector/          # Python-ะฟะฐะบะตั
โ   โโโ __init__.py
โ   โโโ data/
โ   โ   โโโ __init__.py
โ   โ   โโโ download.py
โ   โ   โโโ preprocess.py
โ   โโโ models/
โ   โ   โโโ __init__.py
โ   โ   โโโ train.py
โ   โ   โโโ infer.py
โ   โ   โโโ export.py
โ   โโโ evaluation/
โ   โ   โโโ __init__.py
โ   โ   โโโ metrics.py
โ   โโโ utils/
โ   โ   โโโ __init__.py
โ   โ   โโโ logger.py
โ   โ   โโโ git_utils.py
โ   โโโ serving/
โ       โโโ __init__.py
โ       โโโ server.py
โโโ configs/
โ   โโโ config.yaml
โ   โโโ data/
โ   โ   โโโ data.yaml
โ   โโโ model/
โ   โ   โโโ yolo.yaml
โ   โโโ train/
โ   โ   โโโ train.yaml
โ   โโโ infer/
โ   โ   โโโ infer.yaml
โ   โโโ mlflow.yaml
โโโ data/
โ   โโโ train.dvc
โ   โโโ val.dvc
โ   โโโ test.dvc
โโโ plots/
โ   โโโ (ะณัะฐัะธะบะธ ะธ ะฒะธะทัะฐะปะธะทะฐัะธะธ)
โโโ commands.py
โโโ pyproject.toml
โโโ README.md
โโโ .pre-commit-config.yaml
โโโ .gitignore
โโโ dvc.yaml
```
